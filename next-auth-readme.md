# Next.js Authentication with NextAuth.js - README

This README explains the purpose and functionality of each file in your project, focusing on **NextAuth.js authentication** with GitHub and Google providers.

---

## **1. `route.js` (Authentication API Route)**

### **üìå What it does:**
This file sets up **NextAuth.js** authentication for your Next.js application. It configures GitHub as an authentication provider.

### **üìù Code Explanation:**
```js
import NextAuth from 'next-auth'
import GithubProvider from "next-auth/providers/github"

const handler = NextAuth({
  providers: [
    GithubProvider({
        clientId: process.env.GITHUB_ID,
        clientSecret: process.env.GITHUB_SECRET,
    }),
  ]
})

export {handler as GET, handler as POST}
```
- **Imports NextAuth.js** for authentication handling.
- **Uses GitHub as an OAuth provider**, retrieving `GITHUB_ID` and `GITHUB_SECRET` from environment variables.
- **Exports `handler` for both GET and POST requests**, enabling authentication API routes (`/api/auth/[...nextauth]`).

---

## **2. `SessionWrapper.js` (Session Provider)**

### **üìå What it does:**
This file wraps your application with the **NextAuth `SessionProvider`**, allowing session management across all components.

### **üìù Code Explanation:**
```js
"use client"
import { SessionProvider } from "next-auth/react"

const SessionWrapper = ({children}) => {
  return (
    <SessionProvider>{children}</SessionProvider>
  )
}

export default SessionWrapper
```
- **Wraps the entire app** inside `SessionProvider` to manage authentication state.
- **Ensures session data is accessible** throughout the application.
- **Used in `layout.js` to provide authentication context globally.**

---

## **3. `layout.js` (Root Layout)**

### **üìå What it does:**
This file defines the **root layout of your Next.js app** and includes the `SessionWrapper` to manage authentication.

### **üìù Code Explanation:**
```js
import { Inter } from "next/font/google";
import "./globals.css";
import SessionWrapper from "./components/SessionWraper";
const inter = Inter({ subsets: ["latin"] });

export const metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <SessionWrapper>
      <body className={inter.className}>{children}</body>
      </SessionWrapper>
    </html>
  );
}
```
- **Imports `SessionWrapper`** to provide authentication state to the entire app.
- **Defines page metadata** (title and description).
- **Uses Google Fonts (`Inter`)** for typography.
- **Wraps `<body>` inside `SessionWrapper`**, ensuring session state is available in all pages.

---

## **4. `page.js` (Authentication UI & Logic)**

### **üìå What it does:**
This file implements the **frontend authentication UI**, allowing users to sign in and sign out.

### **üìù Code Explanation:**
```js
"use client"
import { useSession, signIn, signOut } from "next-auth/react"

export default function Component() {
  const { data: session } = useSession()
  console.log(session)
  if(session) {
    return <>
      Signed in as {session.user.email} <br/>
      <button onClick={() => signOut()}>Sign out</button>
    </>
  }
  return <>
    Not signed in <br/>
    <button onClick={() => signIn("github")}>Sign in using Github</button>
    <button onClick={() => signIn("google")}>Sign in using Google</button>
  </>
}
```
- **Uses `useSession()`** to check if the user is logged in.
- **Displays session information** (`session.user.email`) when signed in.
- **Provides `signIn()` and `signOut()` buttons** for authentication.
- **Supports both GitHub and Google login options**.
- **Logs session data to the console** (`console.log(session)`).

---

## **How Authentication Works in This Project**
1. The **frontend (`page.js`) provides sign-in buttons** for GitHub and Google.
2. Clicking a button triggers **NextAuth.js (`route.js`)**, which authenticates the user.
3. **Session data is stored and managed globally (`SessionWrapper.js`)**.
4. The session state is **available throughout the app (`layout.js`)**.
5. The user can **sign out using `signOut()`**, which clears the session.

---

## **Final Notes**
- **Ensure you have `.env` set up with the correct credentials:**
  ```
  GITHUB_ID=your_github_client_id
  GITHUB_SECRET=your_github_client_secret
  GOOGLE_ID=your_google_client_id
  GOOGLE_SECRET=your_google_client_secret
  ```
- If authentication is not working, check **browser console logs** and **API route logs** (`/api/auth/session`).
- Use **NextAuth's built-in debugging** by adding `debug: true` inside `NextAuth({ ... })`.

‚úÖ **With this setup, your Next.js app now supports OAuth authentication!** üöÄ

